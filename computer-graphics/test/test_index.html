<!DOCTYPE HTML>
<html>
<head>
<title>Rotating Earth Example using WebGL through the help of three.js</title>

<style>
body
{
background-color: #000000;
margin: 0px;
}
</style>

<script src="three.js"></script>
</head>
<body>
<canvas id='canvas1'>
</canvas>

<script>

var earth, earthGeometry, earthMaterial, joint, moon, moonGeometry, moonMaterial;
var text3d ;

var canvas1 = document.getElementById('canvas1') ;

init();
animate();

function init()
{
  window.time = 0;
  window.SimpleScene = function() {
     this.init = function(name) {
        this.scene = new THREE.Scene();

        // CREATE THE CAMERA, AND ATTACH IT TO THE SCENE.

        var camera = new THREE.PerspectiveCamera(50, 1, 1, 10000);
        camera.position.z = 5;
        this.scene.add(camera);

        // CREATE THE WEBGL RENDERER, AND ATTACH IT TO THE DOCUMENT BODY.

        var renderer = new THREE.WebGLRenderer( { alpha: true } );
        renderer.setSize(800, 800);
        document.getElementById(name).appendChild(renderer.domElement);

        // CALL THE USER'S SETUP FUNCTION JUST ONCE.

        this.setup();

        // START THE ANIMATION LOOP.

        var that = this;
        (function tick() {
           time = (new Date().getTime()) / 1000;
           that.update();
           renderer.render(that.scene, camera);
           requestAnimationFrame(tick);
        })();
     }
   };

   var light = new THREE.DirectionalLight(0xffffff);
   light.position.set(1, 1, 1).normalize();
   scene.add(light);

   var earthMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture( 'earthmap.jpg' )});
   var moonMaterial = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture( 'moonmap.jpg' )});
   earth = new THREE.Mesh(new THREE.SphereGeometry(1, 30, 30), earthMaterial);
   joint = new THREE.Mesh();
   moon = new THREE.Mesh(new THREE.SphereGeometry(.7, 30, 30), moonMaterial);

   scene.add(earth);
   earth.add(joint);
   joint.add(moon);
// Step 4 : Add Renderer
//renderer = new THREE.CanvasRenderer();
renderer = new THREE.WebGLRenderer(canvas1);
renderer.setSize( window.innerWidth, window.innerHeight );

document.body.appendChild( renderer.domElement );
}

function animate()
{
// note: three.js includes requestAnimationFrame shim
requestAnimationFrame( animate );
render();
}

function render()
{
  earth.rotation.y = -time;

  joint.position.y = 0;
  <!-- joint.rotation.x = time; -->

  moon.position.set(2, 0, 0);
  <!-- moon.rotation.x = Math.PI/2; -->
  moon.rotation.z = -time;
  moon.scale.set(.5,.5,.5); 0.02;

renderer.render( scene, camera );
}

</script>
</body>
</html>
